<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>학습자료 제작 도우미</title>
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&display=swap" rel="stylesheet">

    <!-- Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/pdfjs-dist@3.11.174/build/pdf.min.js"></script>
    <script src="https://unpkg.com/docx@7.1.0/build/index.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mammoth/1.6.0/mammoth.browser.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="main-wrapper">
        <!-- Header -->
        <header class="app-header">
            <h1>학습자료 제작 도우미</h1>
            <p>AI와 함께 PDF 자료를 고등학교 심화 학습지로 변환하세요.</p>
        </header>

        <!-- Tab Navigation -->
        <nav class="tab-nav">
            <button class="tab-btn active" data-tab="tab-pdf">1. 자료 업로드</button>
            <button class="tab-btn" data-tab="tab-prompt">2. 프롬프트 설정</button>
            <button class="tab-btn" data-tab="tab-generate">3. 생성 및 결과</button>
        </nav>

        <!-- Tab 1: PDF Upload & Preview -->
        <div id="tab-pdf" class="tab-content active">
            <section class="upload-zone" id="dropZone">
                <div class="upload-content">
                    <span class="icon">📄</span>
                    <h3>PDF 파일 업로드</h3>
                    <p>여기로 파일을 드래그하거나 클릭하세요</p>
                    <input type="file" id="fileInput" accept=".pdf" hidden>
                    <div id="fileInfo" class="hidden"></div>
                </div>
            </section>

            <section class="pdf-preview hidden" id="pdfPreviewContainer" style="margin-top: 20px;">
                <div class="preview-header"
                    style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                    <h2>📄 PDF 미리보기 (페이지 선택)</h2>
                    <div class="selection-controls">
                        <button id="selectAllBtn" class="btn-text-only" style="padding: 5px 10px; font-size: 0.9rem;">✅
                            전체 선택</button>
                        <button id="deselectAllBtn" class="btn-text-only"
                            style="padding: 5px 10px; font-size: 0.9rem; color: #ef4444;">❌ 전체 해제</button>
                    </div>
                </div>
                <div id="pdfViewer" class="pdf-viewer-content"></div>
            </section>
        </div>

        <!-- Tab 2: Prompt Settings -->
        <div id="tab-prompt" class="tab-content">
            <section class="prompt-config">
                <h2>🛠️ 학습지 생성 프롬프트 수정</h2>
                <p class="description">AI에게 부여할 역할과 지시사항을 자유롭게 수정하세요.</p>

                <!-- AI 모델 선택 -->
                <div
                    style="margin-bottom: 20px; padding: 15px; background: #f0f9ff; border-radius: 8px; border: 2px solid #3b82f6;">
                    <label style="display: block; font-weight: bold; margin-bottom: 8px; color: #1e40af;">🤖 AI 모델
                        선택</label>
                    <select id="aiModel"
                        style="width: 100%; padding: 10px; font-size: 14px; border: 1px solid #3b82f6; border-radius: 6px;">
                        <option value="gpt-4o" selected>GPT-4o (최신 멀티모달 - 최고 성능 🚀)</option>
                        <option value="gpt-4-turbo-preview">GPT-4 Turbo (최신 모델 - 빠름)</option>
                        <option value="gpt-3.5-turbo">GPT-3.5 Turbo (빠르고 저렴 - 기본 품질)</option>
                    </select>
                    <p style="margin-top: 8px; font-size: 12px; color: #64748b;">💡 Tip: GPT-4 이상 사용 시 품질이 크게 향상됩니다.</p>
                </div>

                <!-- Temperature 설정 -->
                <div
                    style="margin-bottom: 20px; padding: 15px; background: #fef3c7; border-radius: 8px; border: 2px solid #f59e0b;">
                    <label style="display: block; font-weight: bold; margin-bottom: 8px; color: #92400e;">🎨 창의성 수준
                        (Temperature)</label>
                    <input type="range" id="temperatureSlider" min="0" max="20" value="7" step="1" style="width: 100%;">
                    <div style="display: flex; justify-content: space-between; margin-top: 5px;">
                        <span style="font-size: 12px; color: #64748b;">엄격 (0.0)</span>
                        <span id="temperatureValue" style="font-weight: bold; color: #f59e0b;">0.7</span>
                        <span style="font-size: 12px; color: #64748b;">창의적 (2.0)</span>
                    </div>
                    <p style="margin-top: 8px; font-size: 12px; color: #64748b;">💡 Tip: 0.7-0.9 추천 (너무 높으면 일관성 떨어짐)</p>
                </div>
                <textarea id="fullSystemPrompt"
                    style="width: 100%; height: 400px; font-family: monospace; line-height: 1.6; padding: 15px; border: 1px solid #ccc; border-radius: 8px;">
역할
당신은 고등학교 수업용 자료를 만드는 “교사용 학습지·평가 설계 조교”입니다. 첨부된 PDF를 읽고, PDF를 근거로만 학습지와 형성평가를 제작합니다.


대상: (예: 고1/고2/고3)
과목/단원: (예: 정보/인공지능 기초/○○ 단원)
수업 시간: (예: 50분 1차시 / 100분 2차시)
학생 수준: (예: 기초/보통/심화)
평가 비중: (예: 활동 60% + 형성평가 40%)
문항 수: 객관식 ( )문항, 단답형 ( )문항, 서술형 ( )문항
난이도 분포: 쉬움 ( )% / 보통 ( )% / 어려움 ( )%
수업 형태: (예: 개별/모둠/플립러닝/실습 중심)
금지사항: “PDF에 없는 개념·용어·사례·수치 임의 추가 금지”

0) 최우선 규칙(반드시 준수)
PDF가 유일한 근거입니다. PDF에 명시되지 않은 내용은 기본적으로 쓰지 마세요.
모든 핵심 개념 설명과 모든 평가 문항 옆에는 근거 페이지 표기를 하세요. 형식: 근거: p.12 또는 근거: p.12~13
PDF만으로 답이 확정되지 않는 문항(해석이 갈리는 문항)은 출제하지 마세요.
불가피하게 일반상식을 덧붙여야 한다면, 본문이 아니라 맨 끝에 [확장(선택)] 섹션으로 분리하고, “PDF 외 추가”라고 명확히 표시하세요(기본값: 작성하지 않음).
학생용 자료에는 정답이 보이지 않게 만들고, 교사용 자료에만 정답/해설/채점기준을 포함하세요.

1) 먼저 PDF에서 ‘근거 기반 설계도’를 만들기
아래 형식으로 PDF를 분석해 설계도를 먼저 출력하세요.
핵심 개념 목록(5~12개): 각 항목에 1줄 정의 + 페이지 근거
필수 용어(10~20개): 용어/간단 정의/페이지 근거
절차·과정·알고리즘/흐름(있다면): 단계 요약 + 페이지 근거
학생이 헷갈리기 쉬운 지점(오개념 후보 3~6개): 왜 헷갈리는지 + 페이지 근거(가능하면)

2) 학습지(학생용) 출력 형식
아래 순서와 분량으로 바로 인쇄 가능한 학습지를 작성하세요(45~50분 기준 2~3쪽 정도, 필요 시 조정).
[A] 수업 안내
수업 제목
학습 목표 3~5개(행동 동사로, 예: 설명한다/비교한다/적용한다)
오늘의 핵심 키워드 5~8개
[B] 핵심 개념 정리(설명 + 확인)
개념별로 “짧은 정의 → 쉬운 설명 → PDF 내 사례/표/그림 언급” 순서로 정리
각 개념 블록 끝에 체크 질문 1개(빈칸/단답/OX 등) 포함
모든 블록에 페이지 근거 표기
[C] 개념 확인 활동(10~15분)
빈칸 채우기 4~6개
OX 3~5개
단답 2~4개
(선택) “근거 찾기” 활동 1개: “PDF p.__에서 근거 문장을 찾아 밑줄” 형태
[D] 적용·확장 활동(10~15분)
PDF 개념을 사용해 해결하는 짧은 과제 1개(실습/분석/설계/토의 중 수업 형태에 맞춤)
산출물 형태를 명확히 제시(예: 5줄 설명, 표 완성, 순서도, 의사코드 등)
채점 포인트 3개를 학생용에는 “주의할 점”으로만 제시(정답은 교사용)
[E] 형성평가(10~15분)
객관식: 보기의 오답이 “그럴듯하지만 PDF와 어긋나게” 설계(낚시 금지, 애매 금지)
단답형: 답이 1개로 고정되게
서술형: 채점 요소가 명확하게(근거 제시/비교/적용 중 하나)
각 문항에 페이지 근거 표기

3) 교사용 자료(정답/해설/채점 기준)
학생용 뒤에 이어서 교사용을 작성하세요.
정답표(한눈에)
문항별 해설: 왜 정답인지 2~4문장 + 페이지 근거
서술형 채점 기준(루브릭): 3수준(상/중/하) 또는 요소별 배점
오개념 피드백 멘트: 오답 유형 3~5개에 대해 교사가 바로 말할 문장으로 제시

4) 최종 점검(스스로 검수 보고)

마지막에 “검수 체크리스트”를 6줄 이내로 출력하세요.
PDF 외 내용이 섞였는지 여부
모든 개념/문항에 페이지 근거가 달렸는지
애매한 문항이 없는지
시간(차시) 안에 가능한 분량인지
난이도 분포가 조건을 충족하는지
학생용에 정답이 노출되지 않았는지
</textarea>

                <div style="margin-top: 20px;">
                    <h3>✨ 추가 요청사항 (Optional)</h3>
                    <textarea id="userPrompt" placeholder="예: 특정 부분은 더 자세히 다뤄줘, 어투를 조금 더 부드럽게 해줘..."
                        style="width: 100%; height: 100px; padding: 10px; border: 1px solid #ccc; border-radius: 8px;"></textarea>
                </div>
            </section>
        </div>

        <!-- Tab 3: Generation -->
        <div id="tab-generate" class="tab-content">
            <section class="config-api" style="max-width: 600px; margin: 0 auto;">
                <div style="text-align: center; margin-bottom: 30px;">
                    <h2>🚀 학습지 생성</h2>
                    <p>설정이 완료되었습니다. API 키를 입력하고 생성하세요.</p>
                </div>

                <div class="input-group" style="margin-bottom: 20px;">
                    <label>� 출력 형식</label>
                    <select id="outputFormat" style="width: 100%; padding: 10px; margin-top: 5px;">
                        <option value="docx">DOCX (Word 문서)</option>
                        <option value="pdf">PDF (휴대용 문서)</option>
                        <option value="html">HTML (웹 페이지)</option>
                    </select>
                </div>

                <div class="input-group" style="margin-bottom: 20px;">
                    <label>�🔑 OpenAI API Key</label>
                    <input type="password" id="apiKey" placeholder="sk-..." autocomplete="off"
                        style="width: 100%; padding: 10px; margin-top: 5px;">
                    <p class="description">키는 저장되지 않고 브라우저에서만 사용됩니다.</p>
                </div>

                <button id="generateBtn" disabled style="width: 100%; padding: 20px; font-size: 1.2rem;">
                    <span class="btn-text">학습자료 생성하기</span>
                    <span class="loader hidden"></span>
                </button>
                <div id="statusMessage" style="text-align: center; margin-top: 20px; font-weight: 500;">준비 완료</div>
            </section>
        </div>
    </div>

    <!-- Script -->
    <script src="script.js"></script>
</body>

</html>